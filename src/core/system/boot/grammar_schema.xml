<Schema>
  <types>
    <Primitive name='str'/>
    <Primitive name='int'/>
    <Primitive name='bool'/>
    <Class name='Grammar'>
      <defined_fields>
        <Field name='start'>
          <type>
            /types[Rule]
          </type>
        </Field>
        <Field name='rules' optional='true' many='true' traversal='true'>
          <type>
            /types[Rule]
          </type>
          <inverse>
            /types[Rule]/defined_fields[grammar]
          </inverse>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Expression'>
      <subclasses>
        /types[Rule] /types[Alt] /types[Sequence] /types[Create] /types[Field]
        /types[Code] /types[Value] /types[Ref] /types[Ref2] /types[Lit]
        /types[Call] /types[Regular] /types[Epsilon]
      </subclasses>
    </Class>
    <Class name='Rule'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='name' key='true'>
          <type>
            /types[str]
          </type>
        </Field>
        <Field name='grammar'>
          <type>
            /types[Grammar]
          </type>
          <inverse>
            /types[Grammar]/defined_fields[rules]
          </inverse>
        </Field>
        <Field name='arg' optional='true' traversal='true'>
          <type>
            /types[Expression]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Alt'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='alts' many='true' traversal='true'>
          <type>
            /types[Expression]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Sequence'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='elements' optional='true' many='true' traversal='true'>
          <type>
            /types[Expression]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Create'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='name'>
          <type>
            /types[str]
          </type>
        </Field>
        <Field name='arg' traversal='true'>
          <type>
            /types[Expression]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Field'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='name'>
          <type>
            /types[str]
          </type>
        </Field>
        <Field name='arg' traversal='true'>
          <type>
            /types[Expression]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Code'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='code'>
          <type>
            /types[str]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Value'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='kind'>
          <type>
            /types[str]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Ref'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='name'>
          <type>
            /types[str]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Ref2'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='path' traversal='true'>
          <type>
            /types[Path]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Lit'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='value'>
          <type>
            /types[str]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Call'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='rule'>
          <type>
            /types[Rule]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Regular'>
      <supers>
        /types[Expression]
      </supers>
      <defined_fields>
        <Field name='arg' traversal='true'>
          <type>
            /types[Expression]
          </type>
        </Field>
        <Field name='optional'>
          <type>
            /types[bool]
          </type>
        </Field>
        <Field name='many'>
          <type>
            /types[bool]
          </type>
        </Field>
        <Field name='sep' optional='true'>
          <type>
            /types[str]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Epsilon'>
      <supers>
        /types[Expression]
      </supers>
    </Class>
    <Class name='Item'>
      <defined_fields>
        <Field name='expression'>
          <type>
            /types[Expression]
          </type>
        </Field>
        <Field name='elements' optional='true' many='true'>
          <type>
            /types[Expression]
          </type>
        </Field>
        <Field name='dot'>
          <type>
            /types[int]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Key'>
      <subclasses>
        /types[It] /types[Const] /types[Path]
      </subclasses>
    </Class>
    <Class name='It'>
      <supers>
        /types[Key]
      </supers>
    </Class>
    <Class name='Path'>
      <supers>
        /types[Key]
      </supers>
      <subclasses>
        /types[Anchor] /types[Sub]
      </subclasses>
    </Class>
    <Primitive name='atom'/>
    <Class name='Const'>
      <supers>
        /types[Key]
      </supers>
      <defined_fields>
        <Field name='value'>
          <type>
            /types[atom]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Anchor'>
      <supers>
        /types[Path]
      </supers>
      <defined_fields>
        <Field name='type'>
          <type>
            /types[str]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Sub'>
      <supers>
        /types[Path]
      </supers>
      <defined_fields>
        <Field name='parent' optional='true' traversal='true'>
          <type>
            /types[Path]
          </type>
        </Field>
        <Field name='name'>
          <type>
            /types[str]
          </type>
        </Field>
        <Field name='key' optional='true' traversal='true'>
          <type>
            /types[Key]
          </type>
        </Field>
        <Field name='is_root' computed='@parent == nil'>
          <type>
            /types[bool]
          </type>
        </Field>
      </defined_fields>
    </Class>
  </types>
</Schema>
