<Schema>
  <types>
    <Primitive name='str'/>
    <Class name='Instances'>
      <defined_fields>
        <Field name='instances' optional='true' many='true' traversal='true'>
          <type>
            .types[Instance]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Value'>
      <subclasses>
        .types[Instance] .types[Prim] .types[Ref] .types[Ref2]
      </subclasses>
      <defined_fields>
        <Field name='origin' optional='true' traversal='true'>
          <type>
            .types[Location]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Instance'>
      <supers>
        .types[Value]
      </supers>
      <defined_fields>
        <Field name='type'>
          <type>
            .types[str]
          </type>
        </Field>
        <Field name='contents' optional='true' many='true' traversal='true'>
          <type>
            .types[Content]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Prim'>
      <supers>
        .types[Value]
      </supers>
      <defined_fields>
        <Field name='kind'>
          <type>
            .types[str]
          </type>
        </Field>
        <Field name='value' optional='true'>
          <type>
            .types[str]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Ref'>
      <supers>
        .types[Value]
      </supers>
      <defined_fields>
        <Field name='name'>
          <type>
            .types[str]
          </type>
        </Field>
        <Field name='type'>
          <type>
            .types[str]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Path'>
      <supers>
        .types[Key]
      </supers>
      <subclasses>
        .types[Anchor] .types[Sub]
      </subclasses>
    </Class>
    <Class name='Ref2'>
      <supers>
        .types[Value]
      </supers>
      <defined_fields>
        <Field name='path' traversal='true'>
          <type>
            .types[Path]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Content'>
      <subclasses>
        .types[Field] .types[Code]
      </subclasses>
    </Class>
    <Class name='Field'>
      <supers>
        .types[Content]
      </supers>
      <defined_fields>
        <Field name='name'>
          <type>
            .types[str]
          </type>
        </Field>
        <Field name='values' optional='true' many='true' traversal='true'>
          <type>
            .types[Value]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Code'>
      <supers>
        .types[Content]
      </supers>
      <defined_fields>
        <Field name='code'>
          <type>
            .types[str]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Primitive name='int'/>
    <Class name='Location'>
      <defined_fields>
        <Field name='path'>
          <type>
            .types[str]
          </type>
        </Field>
        <Field name='offset'>
          <type>
            .types[int]
          </type>
        </Field>
        <Field name='length'>
          <type>
            .types[int]
          </type>
        </Field>
        <Field name='start_line'>
          <type>
            .types[int]
          </type>
        </Field>
        <Field name='start_column'>
          <type>
            .types[int]
          </type>
        </Field>
        <Field name='end_line'>
          <type>
            .types[int]
          </type>
        </Field>
        <Field name='end_column'>
          <type>
            .types[int]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Primitive name='atom'/>
    <Primitive name='bool'/>
    <Class name='Key'>
      <subclasses>
        .types[Const] .types[Path]
      </subclasses>
    </Class>
    <Class name='Const'>
      <supers>
        .types[Key]
      </supers>
      <defined_fields>
        <Field name='value'>
          <type>
            .types[atom]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Anchor'>
      <supers>
        .types[Path]
      </supers>
      <defined_fields>
        <Field name='type'>
          <type>
            .types[str]
          </type>
        </Field>
      </defined_fields>
    </Class>
    <Class name='Sub'>
      <supers>
        .types[Path]
      </supers>
      <defined_fields>
        <Field name='parent' optional='true' traversal='true'>
          <type>
            .types[Path]
          </type>
        </Field>
        <Field name='name'>
          <type>
            .types[str]
          </type>
        </Field>
        <Field name='key' optional='true' traversal='true'>
          <type>
            .types[Key]
          </type>
        </Field>
        <Field name='is_root' computed='@parent == nil'>
          <type>
            .types[bool]
          </type>
        </Field>
      </defined_fields>
    </Class>
  </types>
</Schema>