
\section{Parsing by interpretation}

General: left-recursion etc., infinite lookahead. GLL. 


\begin{verbatim}
class EvalGrammar < Eval
  def Item(this, gll, _)
    return gll.pop if this.finished?
    eval(this.nxt, gll, this.move)
  end

  def Alt(this, gll, nxt)
    item = Item.new(this)
    if this.empty? then
      gll.empty_node(item)
      eval(nxt, gll, nil) if nxt
    else
      gll.create(nxt) if nxt
      eval(item, gll, nil)
    end
  end
  
  def Rule(this, gll, nxt)
    gll.create(nxt) if nxt
    this.alts.each do |alt|
      gll.add(alt)
    end
  end

  def Token(this, gll, nxt)
    return unless this.match?(gll.token)
    cr = gll.leaf_node(this)
    if nxt then
      gll.item_node(nxt, cr)
      eval(nxt, gll, nil)
    end
  end
end
\end{verbatim}

